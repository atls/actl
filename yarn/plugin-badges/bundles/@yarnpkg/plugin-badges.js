/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-badges",
factory: function (require) {
var plugin=(()=>{var F=Object.create,d=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var V=t=>d(t,"__esModule",{value:!0});var s=t=>{if(typeof require!="undefined")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')};var I=(t,r)=>{for(var o in r)d(t,o,{get:r[o],enumerable:!0})},M=(t,r,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of P(r))!G.call(t,a)&&a!=="default"&&d(t,a,{get:()=>r[a],enumerable:!(o=N(r,a))||o.enumerable});return t},e=t=>M(V(d(t!=null?F(T(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var U={};I(U,{BadgesCommand:()=>u,default:()=>B});var w=e(s("@yarnpkg/cli")),R=e(s("@yarnpkg/core")),j=e(s("@yarnpkg/core")),O=e(s("path")),v=e(s("fs")),k=e(s("fs"));var L=e(s("stream"));var E=e(s("@yarnpkg/core")),g=e(s("@yarnpkg/core")),p=class{constructor(r,o){this.stdout=r;this.configuration=o;this.running=!1;this.position=0}start(){this.stdout.isTTY&&(this.running=!0,this.write(),this.tick())}end(){this.stdout.isTTY&&this.running&&(this.running=!1,this.clear(!0))}tick(){setTimeout(()=>{this.running&&(this.clear(),this.write(),this.position=this.position>=p.length?0:this.position+1,this.tick())},p.PROGRESS_INTERVAL)}write(){let r=p.PROGRESS_FRAMES[this.position],o=g.formatUtils.pretty(this.configuration,`YN${E.MessageName.UNNAMED.toString(10).padStart(4,"0")}`,"gray");this.stdout.write(`${g.formatUtils.pretty(this.configuration,"\u27A4","blueBright")} ${o}: \u2502 ${r}
`)}clear(r=!1){this.stdout.write(`[${0}A`),r&&this.stdout.write("[0J")}},l=p;l.PROGRESS_FRAMES=["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"],l.PROGRESS_INTERVAL=120;var $=e(s("child_process"));var C=["@atls/code-service","@atls/schematics","@atls/next-identity-integration","@atls/react-kratos-browser-flows","@atls/nestjs-dataloader","@atls/nestjs-external-renderer","@atls/nestjs-gateway","@atls/nestjs-grpc-errors","@atls/nestjs-grpc-http-proxy","@atls/nestjs-grpc-identity","@atls/nestjs-grpc-playground","@atls/nestjs-grpc-reflection","@atls/nestjs-hydra","@atls/nestjs-keto","@atls/nestjs-kratos","@atls/nestjs-typesense-typeorm","@atls/nestjs-typesense","@atls-ui-generators/button","@atls-ui-generators/input","@atls-ui-generators/icons"],h={"@atls/nestjs":{labelColor:"#EB2845",color:"#2E2F37"},"@atls/next":{labelColor:"#354247",color:"#1D282D"},"@atls/react":{labelColor:"#43CFF4",color:"#2DBFE6"},"@atls-ui":{labelColor:"#097CEB",color:"#0B6DCC"},tools:{labelColor:"#ECEEF5",color:"#D7DCEB"}};var u=class extends w.BaseCommand{async execute(){let r=await j.Configuration.find(this.context.cwd,this.context.plugins);return(await R.StreamReport.start({stdout:this.context.stdout,configuration:r},async a=>{await a.startTimerPromise("Generating badges",async()=>{let f=new l(this.context.stdout,r);f.start();let A=n=>{try{let i=(0,$.execSync)(`yarn info ${n} --json`).toString("utf-8");return JSON.parse(i).children.Version}catch(i){return""}},y=(0,O.join)(process.cwd(),"README.md"),m=(0,v.readFileSync)(y).toString("utf-8").split("[//]: # (VERSIONS)"),S=C.map(n=>({name:n,version:A(n)}));await Promise.all(S.map(n=>n.version)),m[1]=S.reduce((n,i)=>{let D=()=>{let x=c=>`labelColor=${c.labelColor.replace("#","")}&color=${c.color.replace("#","")}`,b=Object.entries(h).find(([c])=>i.name.search(c)!==-1);if(b){let[,c]=b;return x(c)}return x(h.tools)};return i.version?`${n}<img src="https://img.shields.io/static/v1?style=for-the-badge&label=${encodeURIComponent(i.name)}&message=${i.version}&${D()}">
`:n},""),m[1]=`

${m[1]}
`,(0,k.writeFileSync)(y,m.join("[//]: # (VERSIONS)")),f.end()})})).exitCode()}};u.paths=[["badges","generate"]];var B={commands:[u]};return U;})();
return plugin;
}
};
